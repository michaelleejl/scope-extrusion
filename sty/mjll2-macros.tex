\newcommand{\function}[2]{\lambda{} #1. #2}
\newcommand{\continuation}[2]{\kappa{} #1. #2}

\newcommand{\Var}[2]{\texttt{Var}(#1_{#2})}
\newcommand{\Lam}[2]{\texttt{Lam}(#1, #2)}
\newcommand{\App}[2]{\texttt{App}(#1, #2)}
\newcommand{\Ret}[1]{\texttt{Ret}(#1)}
\newcommand{\Do}[3]{\texttt{Do}(#1, #2, #3)}
\newcommand{\Op}[1]{\texttt{Op}(#1)}
\newcommand{\Continue}[2]{\texttt{Continue}(#1, #2)}
\newcommand{\Hwith}[2]{\texttt{Hwith}(#1, #2)}
\newcommand{\Hret}[2]{\texttt{Hret}(#1, #2)}
\newcommand{\Hop}[4]{\texttt{Hop}(#1, #2, #3, #4)}
\newcommand{\err}[0]{\texttt{\textbf{err}}}

\newcommand{\return}[1]{\texttt{\textbf{return}} \,\, {#1}}
\newcommand{\op}[1]{\textbf{\texttt{op}}({#1})}
\newcommand{\bind}[3]{\texttt{\textbf{do}} \,\, {#1} \leftarrow {#2} \, \textbf{\texttt{in}} \, {#3}}
\newcommand{\handleWith}[2]{\textbf{\texttt{handle}} \,\, {#1} \,\, \textbf{\texttt{with}} \,\, \{{#2}\}}
\newcommand{\continue}[2]{\textbf{\texttt{continue}} \, {#1} \, {#2}}
\newcommand{\gensym}[1]{\texttt{mkvar} \, {#1}}
\newcommand{\varToAST}[1]{\texttt{varToAST}({#1})}
\newcommand{\dlet}[2]{\texttt{dlet}({#1}, {#2})}
\newcommand{\checkfv}[1]{\texttt{check}({#1})}
\newcommand{\checkm}[1]{\texttt{check}_{M}({#1})}
\newcommand{\tls}[1]{\texttt{tls}({#1})}

\newcommand{\returnHandler}[2]{\textbf{\texttt{return}}(#1) \mapsto #2}
\newcommand{\opHandler}[3]{\textbf{\texttt{op}}(#1, #2) \mapsto #3}

\newcommand{\evalContext}[0]{E[-]}
\newcommand{\variableFrame}[2]{V_{#1}(#2)}

\newcommand{\equote}[1][e]{\langle \langle #1 \rangle \rangle}
\newcommand{\splice}[1][e]{\$ #1 }

\newcommand{\effconfiguration}[2]{\langle {#1}, {#2} \rangle}
\newcommand{\transition}[2]{{#1} \leadsto {#2}}


\makeatletter
\newcommand{\oset}[3][0ex]{%
  \mathrel{\mathop{#3}\limits^{
    \vbox to#1{\kern-2\ex@
    \hbox{$\scriptstyle#2$}\vss}}}}
\makeatother

\makeatletter
% issue another \@doendpe and lift it out of the group
\patchcmd{\mint@iii}
  {\minted@langlinenosoff\endgroup}
  {\minted@langlinenosoff\endgroup\@doendpe}
  {}{}
\makeatother

\makeatletter
\tcbset{
  after app={%
    \ifx\tcb@drawcolorbox\tcb@drawcolorbox@breakable
    \else
      % add only when not breakabel
      \@endparenv
    \fi
  }
}

% for breakable
\appto\tcb@use@after@lastbox{\@endparenv\@doendpe}
\makeatother

\DeclareRobustCommand\longtwoheadrightarrow
     {\relbar\joinrel\twoheadrightarrow}

\newcommand{\type}[3][]{\Gamma #1 \vdash #2 : #3}
\newcommand{\effectType}[2][\Delta]{{#2} \, ! \, {#1}}
\newcommand{\functionType}[3][\Delta]{{#2} \oset{\text{\tiny ${#1}$}}{\longrightarrow} {#3}}
\newcommand{\handlerType}[2]{#1 \Longrightarrow #2}
\newcommand{\continuationType}[3][\Delta]{#2 \oset{\text{\tiny ${#1}$}}{\longtwoheadrightarrow} #3}